<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Casino - Dados</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #121212; color: white; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; width: 100%; max-width: 1000px; margin-top: 20px; }
        .card { background: #1e1e1e; padding: 20px; border-radius: 12px; border: 1px solid #333; text-align: center; }
        .highlight { font-size: 24px; font-weight: bold; color: #4caf50; }
        .loss { color: #f44336; }
        button { background: #6200ee; color: white; border: none; padding: 15px 30px; border-radius: 8px; font-size: 18px; cursor: pointer; transition: 0.3s; }
        button:hover { background: #3700b3; }
        #chart-container { width: 100%; max-width: 800px; margin-top: 30px; background: #1e1e1e; padding: 20px; border-radius: 12px; }
    </style>
</head>
<body>

    <h1>Simulador de Casino: Suma de Dados</h1>
    <p>Cuotas: 2/12 (34x) | 3/11 (17x) | 4/10 (11.4x) | 5/9 (8.5x) | 6/8 (6.8x) | 7 (5.7x)</p>
    
    <button onclick="simularMuchaTiradas(10000)">Simular 10.000 Tiradas</button>

    <div class="stats-grid">
        <div class="card">
            <div>Total Apostado</div>
            <div id="totalApostado" class="highlight" style="color: #bbb;">$0</div>
        </div>
        <div class="card">
            <div>Ganancia del Casino</div>
            <div id="gananciaCasino" class="highlight">$0</div>
        </div>
        <div class="card">
            <div>Margen del Casino (%)</div>
            <div id="margenPorcentaje" class="highlight" style="color: #2196f3;">0%</div>
        </div>
    </div>

    <div id="chart-container">
        <canvas id="myChart"></canvas>
    </div>

    <script>
        const cuotas = {
            2: 34, 12: 34,
            3: 17, 11: 17,
            4: 11.4, 10: 11.4,
            5: 8.5, 9: 8.5,
            6: 6.8, 8: 6.8,
            7: 5.7
        };

        let historialSumas = new Array(13).fill(0);
        let totalApostado = 0;
        let totalPagado = 0;

        function simularMuchaTiradas(cantidad) {
            for (let i = 0; i < cantidad; i++) {
                // El jugador apuesta 1 unidad a cada nÃºmero posible (estrategia balanceada)
                // Son 11 apuestas por tirada (del 2 al 12)
                const apuestaPorTirada = 11; 
                totalApostado += apuestaPorTirada;

                const d1 = Math.floor(Math.random() * 6) + 1;
                const d2 = Math.floor(Math.random() * 6) + 1;
                const suma = d1 + d2;

                historialSumas[suma]++;
                totalPagado += cuotas[suma];
            }
            actualizarUI();
        }

        function actualizarUI() {
            const ganancia = totalApostado - totalPagado;
            const margen = (ganancia / totalApostado) * 100;

            document.getElementById('totalApostado').innerText = `$${totalApostado.toLocaleString()}`;
            document.getElementById('gananciaCasino').innerText = `$${ganancia.toLocaleString(undefined, {maximumFractionDigits: 2})}`;
            document.getElementById('margenPorcentaje').innerText = `${margen.toFixed(2)}%`;
            
            if(ganancia < 0) document.getElementById('gananciaCasino').classList.add('loss');
            else document.getElementById('gananciaCasino').classList.remove('loss');

            myChart.data.datasets[0].data = historialSumas.slice(2);
            myChart.update();
        }

        const ctx = document.getElementById('myChart').getContext('2d');
        const myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'],
                datasets: [{
                    label: 'Frecuencia de Resultados',
                    data: historialSumas.slice(2),
                    backgroundColor: '#6200ee'
                }]
            },
            options: {
                scales: {
                    y: { beginAtZero: true, grid: { color: '#333' } },
                    x: { grid: { display: false } }
                },
                plugins: { legend: { labels: { color: 'white' } } }
            }
        });
    </script>
</body>
</html>
